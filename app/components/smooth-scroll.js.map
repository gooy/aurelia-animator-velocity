{"version":3,"sources":["components/smooth-scroll.js"],"names":[],"mappings":";;;2DAKa,YAAY;;;;;;;;;;mCALjB,QAAQ;iCAAC,MAAM;0CAAC,eAAe;;sDAC/B,gBAAgB;;;AAIX,kBAAY;;;AAQZ,iBARA,YAAY,CAQX,OAAO,EAAC,QAAQ,EAAE;;;;;;;eAH9B,IAAI,GAAG,EAAE;;AAIP,cAAI,CAAC,OAAO,GAAG,OAAO,CAAC;AACvB,cAAI,CAAC,QAAQ,GAAG,QAAQ,CAAC;SAC1B;;4BAXU,YAAY;;;;uBAEtB,QAAQ;;mBAAY,GAAG;;;;;uBACvB,QAAQ;;mBAAU,SAAS;;;;;iBAUpB,oBAAE;AACR,gBAAI,GAAG,GAAG,IAAI,CAAC,OAAO,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;AAClC,gBAAI,CAAC,IAAI,CAAC,IAAI,EAAE,CAAC;AACjB,gBAAI,CAAC,OAAO,CAAC,gBAAgB,CAAC,OAAO,EAAC,GAAG,CAAC,CAAC;WAC5C;;;iBAEO,oBAAE;AACR,gBAAG,IAAI,CAAC,IAAI;;;;;;AAAE,qCAAe,IAAI,CAAC,IAAI;sBAAhB,GAAG;AAAe,qBAAG,EAAE,CAAC;iBAAA;;;;;;;;;;;;;;;aAAA;WAC/C;;;iBAEM,iBAAC,KAAK,EAAC;AACZ,iBAAK,CAAC,cAAc,EAAE,CAAC;AACvB,gBAAI,CAAC,QAAQ,CAAC,IAAI,CAAC,OAAO,CAAC,YAAY,CAAC,MAAM,CAAC,CAAC,CAAC;AACjD,mBAAO,KAAK,CAAC;WACd;;;iBAeO,kBAAC,aAAa,EAAoC;gBAAnC,OAAO,gCAAC,EAAE;gBAAC,SAAS,gCAAC,QAAQ,CAAC,IAAI;;AAEvD,mBAAO,CAAC,GAAG,CAAC,UAAU,EAAC,aAAa,CAAC,CAAC;AACtC,gBAAI,MAAM,GAAG,aAAa,CAAC;;AAE3B,gBAAG,OAAO,aAAa,KAAK,QAAQ,EAAC;AACnC,kBAAI,IAAI,GAAG,aAAa,CAAC;AACzB,kBAAG,IAAI,CAAC,OAAO,CAAC,GAAG,CAAC,KAAG,CAAC,EAAE,IAAI,GAAG,IAAI,CAAC,KAAK,CAAC,CAAC,EAAC,IAAI,CAAC,MAAM,CAAC,CAAC;AAC3D,oBAAM,GAAG,SAAS,CAAC,aAAa,YAAS,IAAI,QAAI,CAAC;AAClD,kBAAG,CAAC,MAAM,EAAE,SAAS,CAAC,aAAa,cAAW,IAAI,QAAI,CAAC;aACxD;;AAED,gBAAI,CAAC,GAAG,SAAS,CAAC,SAAS,CAAC;AAC5B,kBAAM,CAAC,QAAQ,CAAC,IAAI,GAAG,IAAI,CAAC;AAC5B,qBAAS,CAAC,SAAS,GAAG,CAAC,CAAC;;AAExB,mBAAO,IAAI,CAAC,QAAQ,CAAC,IAAI,CAAC,MAAM,EAAC,QAAQ,EACvC,MAAM,CAAC,MAAM,CAAC;AACZ,sBAAQ,EAAE,IAAI,CAAC,QAAQ;AACvB,oBAAM,EAAC,YAAY,CAAC,SAAS,EAAE;AAC/B,oBAAM,EAAC,IAAI,CAAC,MAAM;aACnB,EAAC,OAAO,CAAC,CACX,CAAC;WAEH;;;iBA3De,CAAC,OAAO,EAAC,gBAAgB,CAAC;;;;iBAsB1B,qBAAE;AAChB,mBAAO,CAAE,QAAQ,CAAC,aAAa,CAAC,YAAY,CAAC,CAAC,SAAS,CAAC;WACzD;;;AA/BU,oBAAY,GADxB,MAAM,CACM,YAAY,KAAZ,YAAY;AAAZ,oBAAY,GAFxB,eAAe,CAAC,eAAe,CAAC,CAEpB,YAAY,KAAZ,YAAY;eAAZ,YAAY;;;8BAAZ,YAAY","file":"components/smooth-scroll.js","sourceRoot":"/source/","sourcesContent":["import {bindable,noView,customAttribute} from 'aurelia-framework';\r\nimport {VelocityAnimator} from \"gooy/aurelia-animator-velocity\";\r\n\r\n@customAttribute(\"smooth-scroll\")\r\n@noView\r\nexport class SmoothScroll{\r\n\r\n  @bindable duration = 400;\r\n  @bindable easing = \"ease-in\";\r\n\r\n  subs = [];\r\n\r\n  static inject = [Element,VelocityAnimator];\r\n  constructor(element,animator) {\r\n    this.element = element;\r\n    this.animator = animator;\r\n  }\r\n\r\n  attached(){\r\n    var sub = this.onClick.bind(this);\r\n    this.subs.push();\r\n    this.element.addEventListener(\"click\",sub);\r\n  }\r\n\r\n  detached(){\r\n    if(this.subs) for(let sub of this.subs) sub();\r\n  }\r\n\r\n  onClick(event){\r\n    event.preventDefault();\r\n    this.scrollTo(this.element.getAttribute(\"href\"));\r\n    return false;\r\n  }\r\n\r\n  static getOffset(){\r\n    return - document.querySelector(\".page-host\").offsetTop;\r\n  }\r\n\r\n  /**\r\n   * Scroll to an element or named anchor\r\n   *\r\n   * @param elementOrHash   element to scroll to or named anchor\r\n   * @param options         animator options\r\n   * @param container       the container element (defaults to document.body)\r\n   *\r\n   * @returns {Promise} resolved when scrolling is done\r\n   */\r\n  scrollTo(elementOrHash,options={},container=document.body){\r\n\r\n    console.log('scrollTo',elementOrHash);\r\n    var target = elementOrHash;\r\n    //find target by id or name\r\n    if(typeof elementOrHash === \"string\"){\r\n      var hash = elementOrHash;\r\n      if(hash.indexOf(\"#\")===0) hash = hash.slice(1,hash.length);\r\n      target = container.querySelector(`[id=\"${hash}\"`);\r\n      if(!target) container.querySelector(`[name=\"${hash}\"`);\r\n    }\r\n\r\n    var t = container.scrollTop;\r\n    window.location.hash = hash;\r\n    container.scrollTop = t;\r\n\r\n    return this.animator.move(target,\"scroll\",\r\n      Object.assign({\r\n        duration: this.duration,\r\n        offset:SmoothScroll.getOffset(),\r\n        easing:this.easing\r\n      },options)\r\n    );\r\n\r\n  }\r\n\r\n}\r\n"]}